<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Energy Monitor</title>
    <link rel="stylesheet" href="/static/styles.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uplot@1.6.31/dist/uPlot.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/uplot@1.6.31/dist/uPlot.iife.min.js"></script>
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon-16x16.png">
    <link rel="shortcut icon" href="/static/favicon.ico">

  </head>
  <body>
    <header class="app-header">
      <div class="branding">
        <div class="logo-glow"></div>
        <h1>Energy Monitor</h1>
      </div>
      <div class="status">
        <span id="status-connection" class="status-pill">Connecting...</span>
        <span id="status-live" class="status-pill live-badge hidden">‚óè LIVE</span>
        <span id="status-points" class="status-pill">0 data points</span>
        <span id="status-last" class="status-pill">Last updated ‚Äì</span>
        <a href="/mobile" class="status-pill mobile-link" title="Mobile View">üì±</a>
      </div>
    </header>

    <main class="app-main">
      <div class="chart-layout">
        <section class="chart-card card">
          <div class="chart-wrapper">
            <div id="chart"></div>
            <div id="chart-loading" class="chart-loading">Loading chart...</div>
            <div id="hover-overlay" class="hover-overlay">
              <div class="hover-row-new">
                <span class="hover-label">Time:</span>
                <span id="hover-time">‚Äì</span>
              </div>
              <div class="hover-row-new">
                <span class="hover-label text-energy">Meter Reading (kWh):</span>
                <span id="hover-total-energy">‚Äì</span>
              </div>
              <div class="hover-row-new">
                <span class="hover-label text-daily-energy">Daily Usage (kWh):</span>
                <span id="hover-daily-energy">‚Äì</span>
              </div>
              <div class="hover-row-new">
                <span id="hover-typical-label" class="hover-label text-avg">30d Avg Daily Usage (kWh):</span>
                <span id="hover-typical-daily-energy">‚Äì</span>
              </div>
              <div class="hover-row-new">
                <span class="hover-label text-power">Live Power (W):</span>
                <span id="hover-power">‚Äì</span>
              </div>
              <div class="hover-row-new">
                <span class="hover-label text-rolling-avg">Avg Power (W):</span>
                <span id="hover-rolling-avg">‚Äì</span>
              </div>
            </div>
          </div>
          <div class="toolbar">
            <div class="toolbar-row">
              <button id="btn-toggle-power" class="btn btn-trace btn-trace-power" data-series="1">Live Power</button>
              <button id="btn-toggle-daily" class="btn btn-trace btn-trace-daily" data-series="2">Daily Usage</button>
              <button id="btn-toggle-typical" class="btn btn-trace btn-trace-typical" data-series="3">30d Avg</button>
              <button id="btn-toggle-avg-power" class="btn btn-trace btn-trace-avg-power" data-series="4">Avg Power</button>
              <button id="btn-toggle-meter" class="btn btn-trace btn-trace-meter" data-series="5">Meter Reading</button>
            </div>
            <div class="toolbar-row">
              <button id="btn-refresh" class="btn">Refresh</button>
              <button id="btn-reset" class="btn">Reset</button>
              <button id="btn-toggle-scale" class="btn" title="Toggle power axis scale">üìä Auto</button>
              <button id="btn-toggle-avg-mode" class="btn" title="Toggle between 30d moving average and total average">üìà 30d</button>
              <button id="btn-last-hour" class="btn">Hour</button>
              <button id="btn-last-day" class="btn">Day</button>
              <button id="btn-last-week" class="btn">Week</button>
              <button id="btn-last-month" class="btn">Month</button>
              <button id="btn-last-year" class="btn">Year</button>
            </div>
          </div>
        </section>

        <aside class="stats-card card">
          <div class="stats-title">Selection Stats</div>
          <div class="stats-grid">
            <div class="stat">
              <div class="label">Cost ‚Ç¨/kWh</div>
              <div class="value">
                <input id="cost-input" type="text" value="0.3102" />
              </div>
            </div>
            <div class="stat period-stat">
              <div class="label">Energy & Cost</div>
              <div class="value">
                <div class="period-row period-header">
                  <span class="period-label"></span>
                  <span class="text-energy">Real</span>
                  <span class="text-avg">Typical</span>
                </div>
                <div class="period-row">
                  <span class="period-label text-energy">kWh</span>
                  <span class="text-energy"><span id="stat-energy">‚Äì</span></span>
                  <span class="text-avg"><span id="stat-avg-energy">‚Äì</span></span>
                </div>
                <div class="period-row">
                  <span class="period-label">‚Ç¨</span>
                  <span><span id="stat-cost-range">‚Äì</span></span>
                  <span class="text-avg-light"><span id="stat-avg-cost">‚Äì</span></span>
                </div>
              </div>
            </div>
            <div class="stat period-stat">
              <div class="label">Power Stats</div>
              <div class="value">
                <div class="period-row">
                  <span class="period-label text-power">Max (W)</span>
                  <span class="text-power"><span id="stat-max">‚Äì</span></span>
                </div>
                <div class="period-row">
                  <span class="period-label text-power">Avg (W)</span>
                  <span class="text-power"><span id="stat-avg">‚Äì</span></span>
                </div>
                <div class="period-row">
                  <span class="period-label text-power">Min (W)</span>
                  <span class="text-power"><span id="stat-min">‚Äì</span></span>
                </div>
              </div>
            </div>
            <div class="stat">
              <div class="label">Data Points</div>
              <div class="value"><span id="stat-count">‚Äì</span></div>
            </div>
            <div class="stat">
              <div class="label">Range</div>
              <div class="value"><span id="stat-range">‚Äì</span></div>
            </div>
          </div>
        </aside>

        <aside class="stats-card card">
          <div class="stats-title">Period Summary</div>
          <div class="stats-grid">
            <div class="stat period-stat">
              <div class="label">Total</div>
              <div class="value">
                <div class="period-row">
                  <span class="period-label text-energy">kWh</span>
                  <span class="text-energy"><span id="stat-current-consumption">‚Äì</span></span>
                </div>
                <div class="period-row">
                  <span class="period-label">‚Ç¨</span>
                  <span><span id="stat-total-cost">‚Äì</span></span>
                </div>
              </div>
            </div>
            <div class="stat period-stat">
              <div class="label">Last 30 Days</div>
              <div class="value">
                <div class="period-row period-header">
                  <span class="period-label"></span>
                  <span class="text-energy">Real</span>
                  <span class="text-avg">Typical</span>
                </div>
                <div class="period-row">
                  <span class="period-label text-energy">kWh</span>
                  <span class="text-energy"><span id="stat-month-energy">‚Äì</span></span>
                  <span class="text-avg"><span id="stat-month-avg-energy">‚Äì</span></span>
                </div>
                <div class="period-row">
                  <span class="period-label">‚Ç¨</span>
                  <span><span id="stat-month-cost">‚Äì</span></span>
                  <span class="text-avg-light"><span id="stat-month-avg-cost">‚Äì</span></span>
                </div>
              </div>
            </div>
            <div class="stat period-stat">
              <div class="label">Last 7 Days</div>
              <div class="value">
                <div class="period-row period-header">
                  <span class="period-label"></span>
                  <span class="text-energy">Real</span>
                  <span class="text-avg">Typical</span>
                </div>
                <div class="period-row">
                  <span class="period-label text-energy">kWh</span>
                  <span class="text-energy"><span id="stat-week-energy">‚Äì</span></span>
                  <span class="text-avg"><span id="stat-week-avg-energy">‚Äì</span></span>
                </div>
                <div class="period-row">
                  <span class="period-label">‚Ç¨</span>
                  <span><span id="stat-week-cost">‚Äì</span></span>
                  <span class="text-avg-light"><span id="stat-week-avg-cost">‚Äì</span></span>
                </div>
              </div>
            </div>
            <div class="stat period-stat">
              <div class="label">Last Day</div>
              <div class="value">
                <div class="period-row period-header">
                  <span class="period-label"></span>
                  <span class="text-energy">Real</span>
                  <span class="text-avg">Typical</span>
                </div>
                <div class="period-row">
                  <span class="period-label text-energy">kWh</span>
                  <span class="text-energy"><span id="stat-day-energy">‚Äì</span></span>
                  <span class="text-avg"><span id="stat-day-avg-energy">‚Äì</span></span>
                </div>
                <div class="period-row">
                  <span class="period-label">‚Ç¨</span>
                  <span><span id="stat-day-cost">‚Äì</span></span>
                  <span class="text-avg-light"><span id="stat-day-avg-cost">‚Äì</span></span>
                </div>
              </div>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <script src="/static/shared.js"></script>
    <script src="/static/app.js"></script>
  </body>
</html>
